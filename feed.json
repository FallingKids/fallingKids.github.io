{
    "version": "https://jsonfeed.org/version/1",
    "title": "技术笔记",
    "subtitle": "幸好有你雯",
    "icon": "https://fallingkids.github.io/images/favicon.ico",
    "description": "",
    "home_page_url": "https://fallingkids.github.io",
    "items": [
        {
            "id": "https://fallingkids.github.io/mysql-note-02/",
            "url": "https://fallingkids.github.io/mysql-note-02/",
            "title": "一周浅谈：Mysql - 字符集和比较规则",
            "date_published": "2022-06-01T14:56:49.000Z",
            "content_html": "<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>计算机中实际存储的是二进制数据，是没有办法直接存储字符串的，因此为了存储字符是建立在字符与二进制数据的映射关系之上。建立这个关系，我们首先需要解决两个问题：</p>\n<ul>\n<li>要把哪些字符映射成二进制数据？</li>\n<li>怎么映射？把字符映射成二进制数据叫做编码，将二进制数据映射到字符叫做解码</li>\n</ul>\n<pre><code>'a' -&gt; 00000001 (十六进制0x01)\n'b' -&gt; 00000010 (十六进制0x02)\n'A' -&gt; 00000011 (十六进制0x03)\n'B' -&gt; 00000100 (十六进制0x04)\n</code></pre>\n<p>现在有了我们自己的字符集，我们就可以用二进制表示一些字符串了，例如：</p>\n<ul>\n<li>'bA' -&gt; 0000001000000011 （十六进制 0x0203）</li>\n<li>'baB' -&gt; 000000100000000100000100 （十六进制 0x020104）</li>\n<li>'cd' -&gt; 无法表示，因为 huyizhou 字符集里不包含 'c' 和 'd'</li>\n</ul>\n<hr />\n<h2 id=\"字符比较规则\"><a class=\"anchor\" href=\"#字符比较规则\">#</a> 字符比较规则</h2>\n<p>其实字符的比较，最容易想到的就是比较两个字符对应的二进制编码大小。二进制比较规则景观很简单，但是有时候并不符合现实的需求。例如，在很多场景下，英文字符都是不区分大小写的，换句话说 'a' 和 'A' 是相等的，这个时候就不能简单的使用二进制比较，这个时候就需要这两个规则：</p>\n<ul>\n<li>将两个大小写不同的字符全部都转为大写或者小写</li>\n<li>再比较这两个字符对应的二进制数据</li>\n</ul>\n<hr />\n<h2 id=\"常见的字符集\"><a class=\"anchor\" href=\"#常见的字符集\">#</a> 常见的字符集</h2>\n<ul>\n<li>ASCII 字符集：共收录 128 个字符，包括空格、标点符号、数字、大小写字母和一些不可见的字符。由于 ASCII 字符集一共也才 128 个字符，所以可以使用一个字节来进行编码</li>\n</ul>\n<pre><code>'L' -&gt; 01001100 （十六进制0x4C，十进制76）\n'M' -&gt; 01001101 （十六进制0x4D，十进制77）\n</code></pre>\n<ul>\n<li>ISO 8859-1 字符集：共收录 256 个字符，在 ASCII 字符集的基础上又扩充了 128 个西欧常用字符，因此 ISO 8859-1 字符集也可以使用一个字节来进行编码</li>\n<li>GBK</li>\n<li>UTF-8</li>\n</ul>\n<h2 id=\"其他\"><a class=\"anchor\" href=\"#其他\">#</a> 其他</h2>\n",
            "tags": [
                "Mysql"
            ]
        },
        {
            "id": "https://fallingkids.github.io/mysql-note-01/",
            "url": "https://fallingkids.github.io/mysql-note-01/",
            "title": "一周浅谈：Mysql整体架构设计",
            "date_published": "2022-06-01T02:50:55.000Z",
            "content_html": "<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>最近刚开始再看《Mysql 是怎样运行的 -- 从根儿上理解 MySQL》，迫于见明的压力，在此开始写一些笔记也好或者对于该书获取的一些知识点提炼出来</p>\n<hr />\n<h2 id=\"架构图\"><a class=\"anchor\" href=\"#架构图\">#</a> 架构图</h2>\n<p><img data-src=\"https://res.cloudinary.com/https-fallingkids-github-io/image/upload/v1654054743/blog/2022-06-01/image_qvugqu.png\" alt=\"image.png\" /></p>\n<ol>\n<li>建立连接</li>\n</ol>\n<p>就跟大部分的开源组件的模式一样，client 和 server。client 具体为 api，在不同的应用方进行调用；server 具体实现业务如存储，查询，分词等一些逻辑。当然，client 与 server 之间的连接是有通过我们熟悉的 tcp 连接，还有命名管道和共享内存，UNIX 域套接字</p>\n<ol start=\"2\">\n<li>解析与优化</li>\n</ol>\n<p>mysql 服务器从客户端那获得了文本形式的请求，接下来数据要从存储中取出来，还需要很多前置的过程，比如：要取什么数据（对于 sql 语句需要做出分析传递给下一层），怎么取是最快，这部分做这件事情</p>\n<ol start=\"3\">\n<li>存储引擎</li>\n</ol>\n<p>当服务完成了查询优化以后，都还没有真正地去访问真实的表中数据（在查询期间可能会访问表中少量的数据）。因此，mysql 服务器把数据的存储和提取操作都封装到存储引擎模块（表处理器）中。从逻辑上，表示一行一行的记录组成。在物理上，如何表示记录，怎么读取记录，把数据写入具体的物理存储器，这些都存储引擎负责的事情。同时存储引擎是各种各样的，可以根据用户自己选择去使用，因此作为开发者的我们可以自己开发一套存储引擎去使用</p>\n<hr />\n<h2 id=\"建立连接\"><a class=\"anchor\" href=\"#建立连接\">#</a> 建立连接</h2>\n<ol>\n<li>TCP/IP</li>\n</ol>\n<p>在真实的环境中，数据库服务器进程和客户端进程可能会运行在不同的主机中，因此必须网络进行通讯。mysql 服务器中默认的端口号是 3306，默认监听 3306 端口。因此我们就可以通过 IP 地址 + 端口号的方式与这个进程建立连接，这样进程间就可以进行网络通讯。下面一些关于网络连接用到的指令</p>\n<pre><code>mysqld -P3307\n</code></pre>\n<pre><code>mysql -h127.0.0.1 -uroot -P3307 -p\n</code></pre>\n<ol start=\"2\">\n<li>命名管道和共享内存</li>\n</ol>\n<p>windows 用户可以用这招，我就不细了解</p>\n<ol start=\"3\">\n<li>UNIX 域套接字</li>\n</ol>\n<p>服务器进程和客户端进程都运行在操作系统为类 UNIX 的同一台机器上，就可以使用这个方法进行进程间通讯。不细聊了</p>\n<hr />\n<h2 id=\"连接管理\"><a class=\"anchor\" href=\"#连接管理\">#</a> 连接管理</h2>\n<ul>\n<li>线程池</li>\n</ul>\n<p>当每有一个客户端进程连接到服务器进程时，服务器进程都会创建一个线程专门处理这个客户端的交互：当该客户端退出时会与服务器断开连接，服务器并不会直接把和客户端交互建立起来的线程销毁，而是把他缓存起来，当另一个新的客户端再进行连接时，把这个缓存的线程分配给新客户端。这样就避免了频繁创建和销毁线程，节省开销。mysql 服务器是为每一个进来的客户端分配一个线程，这样的问题就会有，加入线程分配的太多就会严重影响系统性能，所以我们也需要限制可以同时连接到服务器的客户端数量，也就是我们日常口中经常提到的连接池，mysql 也把这个字段开放出来，让我们来配置，因此这个配置的数值很考验开发者对我们的机器资源以及需要什么样的性能要有一个很深刻的理解。</p>\n<ul>\n<li>身份认证</li>\n</ul>\n<p>当客户端发起连接时，是会携带主机信息、用户名、密码等信息，服务器程序就会对客户端提供的这些信息进行认证。如果认证失败，服务器就会拒绝连接。同时，当客户端与服务器是部署在不同的地方，可以采用传输层安全性协议对连接进行加密</p>\n<h2 id=\"解析与优化\"><a class=\"anchor\" href=\"#解析与优化\">#</a> 解析与优化</h2>\n<ol>\n<li>查询缓存（5.7.20 以后不推荐使用，8.0 中直接将其删除）</li>\n</ol>\n<p>我在平时开发的过程中，当缓存中没有数据时，一次数据获取都从调用 BI 的数据接口来获取。但是为了提高效率，会把刚刚查询的结果放入缓存中，这样在短时间内再查询一次就能提高查询的效率，不需要做过多的计算。mysql 也是如此，但是 mysql 对于两个查询请求有任何字符上面的不同（例如，空格、注释、大小写），都会导致缓存不会命中。另外，查询中包含某些函数、用户自定义变量和函数、系统表，如 mysql、information_schema、performance_schema 数据库中的表，这个请求也不会命中。当然，缓存也会有缓存失效的时候，只要表的结构或者发生了更改或者数据发生了修改，对应的所有缓存表全部失效</p>\n<ol start=\"2\">\n<li>语法解析</li>\n</ol>\n<p>我们知道客户端程序发送过来的请求指示一段文本，mysql 服务器首先要对这段文本进行分析。属于编译过程了，设计词法解析、语法解析、语义分析，不深聊了</p>\n<ol start=\"3\">\n<li>\n<p>查询优化</p>\n<p>语法解析之后，服务器已经获得了需要的信息（要查询的表和列是哪些、搜索条件是什么）。但是我们写的 mysql 语句执行起来效率可能并不是那么高，所以 mysql 的优化程序会对我们的语句做一些优化，优化结果就是生成一个执行计划（explain），这个执行计划表明了应该用哪些索引执行查询，以及表之间额查询顺序是啥，等等。</p>\n</li>\n</ol>\n<hr />\n<h2 id=\"存储引擎\"><a class=\"anchor\" href=\"#存储引擎\">#</a> 存储引擎</h2>\n<p>mysql 服务器把数据的存储和提取操作都封装到了一个名为存储引擎的模块中，mysql 中有很多存储引擎，但是最常用的还是 InnoDB，偶尔用一下 MyISAM，再偶尔用一下 MEMORY</p>\n<ul>\n<li>InnoDB</li>\n</ul>\n<p>支持事务、行级别、外键</p>\n<ul>\n<li>MyISAM</li>\n</ul>\n<p>主要的非事务处理存储引擎</p>\n<ul>\n<li>MEMORY</li>\n</ul>\n<p>数据只存储在内存，不存储在磁盘；多用于临时表</p>\n<hr />\n<h2 id=\"其他\"><a class=\"anchor\" href=\"#其他\">#</a> 其他</h2>\n<p>本来想写第二章的内容，启动选项和系统变量，但是发现感觉不是很有必要，后面有必要再补上</p>\n",
            "tags": [
                "Mysql"
            ]
        },
        {
            "id": "https://fallingkids.github.io/hello-world/",
            "url": "https://fallingkids.github.io/hello-world/",
            "title": "Hello World",
            "date_published": "2022-05-31T07:28:50.131Z",
            "content_html": "<p>Welcome to <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvLw==\">Hexo</span>! This is your very first post. Check <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mv\">documentation</span> for more info. If you get any problems when using Hexo, you can find the answer in <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3MvdHJvdWJsZXNob290aW5nLmh0bWw=\">troubleshooting</span> or you can ask me on <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2hleG9qcy9oZXhvL2lzc3Vlcw==\">GitHub</span>.</p>\n<h2 id=\"quick-start\"><a class=\"anchor\" href=\"#quick-start\">#</a> Quick Start</h2>\n<h3 id=\"create-a-new-post\"><a class=\"anchor\" href=\"#create-a-new-post\">#</a> Create a new post</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo new <span class=\"token string\">\"My New Post\"</span></pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvd3JpdGluZy5odG1s\">Writing</span></p>\n<h3 id=\"run-server\"><a class=\"anchor\" href=\"#run-server\">#</a> Run server</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo server</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvc2VydmVyLmh0bWw=\">Server</span></p>\n<h3 id=\"generate-static-files\"><a class=\"anchor\" href=\"#generate-static-files\">#</a> Generate static files</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo generate</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3MvZ2VuZXJhdGluZy5odG1s\">Generating</span></p>\n<h3 id=\"deploy-to-remote-sites\"><a class=\"anchor\" href=\"#deploy-to-remote-sites\">#</a> Deploy to remote sites</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo deploy</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvb25lLWNvbW1hbmQtZGVwbG95bWVudC5odG1s\">Deployment</span></p>\n",
            "tags": []
        }
    ]
}